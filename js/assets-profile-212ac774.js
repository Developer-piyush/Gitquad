System.register(["./chunk-vendor.js","./chunk-frameworks.js","./chunk-responsive-underlinenav.js","./chunk-profile.js"],(function(e,t){"use strict";var n,o,r,i,s,a;return{setters:[function(e){n=e.a,o=e.o,r=e.r},function(e){i=e.aX,s=e.e},function(e){a=e.a},function(){}],execute:function(){n("click",".js-new-user-contrib-example",(async function(e){const t=document.querySelector(".js-calendar-graph");if(t.classList.contains("sample-graph"))return;t.classList.add("sample-graph");const n=e.currentTarget.getAttribute("data-url"),o=await fetch(n,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!o.ok)return void t.classList.remove("sample-graph");const r=await o.text(),i=document.createElement("div");i.innerHTML=r;t.querySelector(".js-calendar-graph-svg").replaceWith(i.children[0])}));let e=null;const c=document.createElement("div");function l(){const e=document.querySelector(".js-calendar-graph").getAttribute("data-url");return new URL(e,window.location.origin)}function d(){c&&(c.hidden=!0)}async function u(e){const t=document.getElementById("js-contribution-activity");if(!t)return;t.classList.add("loading");const n=await s(document,e);t.classList.remove("loading"),t.innerHTML="",t.append(n)}function f(e,t){const n=new URLSearchParams(e);n.delete("from"),n.delete("to"),n.delete("org");let o=t.fromStr;t.from&&(o=y(t.from,!!t.forceLocalTime)),o&&n.append("from",o);let r=t.toStr;t.to&&(r=y(t.to,!!t.forceLocalTime)),r&&n.append("to",r);const i=t.org;return i&&n.append("org",i),n}async function m(e,t,n){const o=document.querySelector(".js-calendar-graph").getAttribute("data-graph-url"),r=new URL(o,window.location.origin),i=f(r.search.slice(1),{from:e,to:t,org:n,forceLocalTime:!0});r.search=i.toString();const a=await s(document,r.toString());document.querySelector(".js-yearly-contributions").replaceWith(a)}function p(e,t){const n=document.querySelector(".js-calendar-graph"),o=n.querySelectorAll("rect[data-count]");for(const i of o)i.classList.remove("active");if(n.classList.remove("days-selected"),e||t){n.classList.add("days-selected");for(const e of o)r(e)&&e.classList.add("active")}function r(n){const o=j(n.getAttribute("data-date")||"").getTime();return e&&t?e.getTime()<=o&&o<=t.getTime():e?o===e.getTime():void 0}}function g(){const e=document.querySelector(".js-calendar-graph").querySelectorAll("rect.active"),t=e[0],n=e[e.length-1],o=t&&t.getAttribute("data-date"),r=n&&n.getAttribute("data-date");return o&&r?{first:o,last:r}:null}function h(){return g()||function(){const e=new URLSearchParams(window.location.search.slice(1)),t=e.get("from"),n=e.get("to");return t&&n?{first:t,last:n}:null}()||function(){const e=new URL(S(),window.location.origin),t=new URLSearchParams(e.search.slice(1)),n=t.get("from"),o=t.get("to");return n&&o?{first:n,last:o}:null}()}function w(e){return("0"+e).slice(-2)}function y(e,t){return t?`${e.getFullYear()}-${w(e.getMonth()+1)}-${w(e.getDate())}`:`${e.getUTCFullYear()}-${w(e.getUTCMonth()+1)}-${w(e.getUTCDate())}`}function j(e){const[t,n,o]=e.split("-").map((e=>parseInt(e,10)));return new Date(Date.UTC(t,n-1,o))}async function b(e){const t=g(),n=function(){const e=document.querySelector(".js-calendar-graph");return{first:e.getAttribute("data-from"),last:e.getAttribute("data-to")}}(),o=new Date(n.first),r=new Date(n.last);if(await m(o,r,e),t){p(new Date(t.first),new Date(t.last))}}function S(){return document.querySelector(".js-profile-timeline-year-list .js-year-link.selected").href||""}function v(e){const t=new URL(e,window.location.origin).search,n=new URLSearchParams(t.slice(1)),o=n.get("org"),r=n.get("from"),i=n.get("to"),s=new Date(r),a=new Date(i);m(s,a,o);const c=l(),d=f(c.search.slice(1),{from:s,to:a,org:o});d.append("tab","overview"),c.search=d.toString(),u(c.toString())}function L(e){const t=e.closest(".js-details-container");t&&t.classList.add("open");const n=e.getBoundingClientRect(),o=window.scrollY+n.top-62-10;window.scrollTo(0,o)}function q(e){if(document.querySelector(".js-profile-editable-area").hidden=e,document.querySelector(".js-profile-editable-names").hidden=e,document.querySelector(".js-profile-editable-form").hidden=!e,document.querySelector(".js-profile-editable-error").textContent="",!e){const e=document.querySelector(".js-profile-editable-pronouns-select"),t=document.querySelector(".js-profile-editable-pronouns-custom");e&&t&&""===t.value&&(e.selectedIndex=0,t.hidden=!0)}}c.classList.add("svg-tip","svg-tip-one-line"),c.style.pointerEvents="none",c.hidden=!0,document.body.appendChild(c),o(".js-calendar-graph-svg",(function(t){const n=t.closest(".js-calendar-graph");n.addEventListener("mouseover",(function(e){const t=e.target;t.matches("rect[data-count]")&&function(e){d();const t=j(e.getAttribute("data-date")),n=parseInt(e.getAttribute("data-count")||""),o=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",timeZone:"UTC"}).format(t),r=0===n?"No":new Intl.NumberFormat("en-US").format(n),i=document.createElement("strong");i.textContent=`${r} ${1===n?"contribution":"contributions"}`,c.innerHTML="",c.append(i," on "+o),c.hidden=!1;const s=e.getBoundingClientRect(),a=s.left+window.pageXOffset-c.offsetWidth/2+s.width/2,l=s.bottom+window.pageYOffset-c.offsetHeight-2*s.height,u=document.querySelector(".js-calendar-graph").getBoundingClientRect();c.style.top=l+"px",function(e,t){return e.x>t}(u,a)?(c.style.left=function(e){return e.left+window.pageXOffset-.1*c.offsetWidth+e.width/2}(s)+"px",c.classList.add("left"),c.classList.remove("right")):!function(e,t){return e.x+e.width<t+c.offsetWidth}(u,a)?(c.style.left=a+"px",c.classList.remove("left"),c.classList.remove("right")):(c.style.left=function(e){return e.left+window.pageXOffset-.9*c.offsetWidth+e.width/2}(s)+"px",c.classList.add("right"),c.classList.remove("left"))}(t)})),n.addEventListener("mouseout",d);const o=n.getAttribute("data-from");o&&(e=j(o))})),n("click",".js-calendar-graph rect[data-count]",(function(t){const n=t.currentTarget,o=n.closest(".js-calendar-graph").getAttribute("data-org"),r=n.getAttribute("data-date");n.classList.contains("active")?v(S()):function(t,n,o){let r,i;if(e&&n){const n=e.getTime(),o=26784e5,s=n-o,a=n+o;[r,i]=t>e?[e,t]:[t,e],r=new Date(Math.max(r.getTime(),s)),i=new Date(Math.min(i.getTime(),a)),e=null}else e=i=r=t;p(r,i);const s=l(),a=f(s.search.slice(1),{from:r,to:i,org:o});a.append("tab","overview"),s.search=a.toString(),u(s.toString())}(j(r),t.shiftKey,o)})),n("click",".js-org-filter-link",(function(e){e.stopPropagation(),e.preventDefault();const t=e.currentTarget,n=t.closest(".js-org-filter-links-container").querySelector(".js-org-filter-link.selected"),o=new URL(t.href,window.location.origin),r=new URLSearchParams(o.search.slice(1)),a=r.get("org"),c=h(),d=new Date(c.first),m=new Date(c.last);n&&n.classList.remove("selected"),t!==n&&t.classList.add("selected"),b(a);const p=l(),g={org:a,from:null,to:null};r.has("from")&&(g.from=d),r.has("to")&&(g.to=m);const w=f(p.search.slice(1),g);p.search=w.toString(),u(p.toString()),async function(e,t){const n=document.getElementById("year-list-container");if(!n)return;t.append("year_list","1"),e.search=t.toString();const o=await s(document,e.toString());n.innerHTML="",n.append(o)}(p,w),i(null,"",p.toString())})),n("click",".js-year-link",(function(e){e.stopPropagation(),e.preventDefault();const t=e.currentTarget;t.closest("ul").querySelector(".js-year-link.selected").classList.remove("selected"),t.classList.add("selected"),v(t.href),i(null,"",t.href)})),function(){const e=window.location.hash;if(!e||e.indexOf("#event-")<0)return;const t=e.slice(1,e.length),n=document.getElementById(t);n&&L(n)}(),window.addEventListener("hashchange",(function(e){const t=e.newURL||window.location.href,n=t.slice(t.indexOf("#")+1,t.length),o=document.getElementById(n);o&&(e.stopPropagation(),L(o))})),r(".js-show-more-timeline-form",(async function(e,t){await t.text();const n=document.querySelector(".js-show-more-timeline-form");if(n){const t=n.getAttribute("data-year"),o=document.querySelector(".js-year-link.selected"),r=document.querySelector("#year-link-"+t);o.classList.remove("selected"),r.classList.add("selected");if(t!==e.getAttribute("data-year")){const e=n.getAttribute("data-from"),t=new Date(e),o=n.getAttribute("data-to");m(t,new Date(o),n.getAttribute("data-org"))}}document.title=e.getAttribute("data-title")||"",i(null,"",e.getAttribute("data-url")||"")})),document.addEventListener("pjax:beforeReplace",d),o(".js-activity-overview-graph-container",(e=>{!async function(e){const{initializeOverviewGraphContainer:n}=await t.import("./chunk-contributions-spider-graph.js");n(e)}(e)})),n("click",".js-profile-editable-edit-button",(function(){!function(){const e=document.querySelector(".js-user-profile-bio").textContent;if("string"!=typeof e)return;document.querySelector(".js-user-profile-bio-edit").value=e}(),q(!0)})),n("click",".js-profile-editable-cancel",(function(){q(!1)})),r(".js-profile-editable-form",(async(e,t)=>{let n;try{n=await t.html()}catch(r){if(422===r.response.status){document.querySelector(".js-profile-editable-error").textContent=r.response.json.message}return}var o;o=n.html,document.querySelector(".js-profile-editable-replace").replaceWith(o),q(!1)}));let k=null,x=null;function T(e){const{item:t,oldIndex:n}=e,{parentNode:o}=t;x=o.children[n+1]}async function A(e){const{oldIndex:t,newIndex:n,item:o}=e;if(t===n)return;const r=o.closest(".js-pinned-items-reorder-form"),i=r.closest(".js-pinned-items-reorder-container"),s=i.querySelector(".js-pinned-items-spinner"),a=i.querySelector(".js-pinned-items-reorder-message");a.textContent="",s.style.display="inline-block",k.option("disabled",!0);if((await fetch(r.action,{method:r.method,body:new FormData(r),headers:{"X-Requested-With":"XMLHttpRequest"}})).ok)a.textContent=a.getAttribute("data-success-text")||"",s.style.display="none",k.option("disabled",!1);else{a.textContent=a.getAttribute("data-error-text")||"",s.style.display="none";const e=o.parentNode;x?e.insertBefore(o,x):e.appendChild(o)}}function C(e,t){t>0?(e.textContent=function(e){return e>999?(e/1e3).toFixed(1)+"k":e.toLocaleString()}(t),e.hidden=!1):e.remove()}o(".js-pinned-items-reorder-list",{async add(e){const{Sortable:n}=await t.import("./chunk-sortable-behavior.js");k=n.create(e,{animation:150,item:".js-pinned-item-list-item",handle:".js-pinned-item-reorder",onUpdate:A,onStart:T,chosenClass:"is-dragging"})}}),n("submit",".js-pinned-items-reorder-form",(function(e){e.preventDefault()})),n("click",".js-pinned-item-list-item .js-sortable-button",(async function({currentTarget:e}){const{moveWithButton:n}=await t.import("./chunk-sortable-behavior.js");n(e,e.closest(".js-pinned-item-list-item"),A)})),o(".js-user-profile-sticky-fields.is-stuck",(function(){const e=document.querySelector(".js-user-profile-sticky-bar");return{add(){e.classList.add("is-stuck")},remove(){e.classList.remove("is-stuck")}}})),o(".js-user-profile-follow-button.is-stuck",(function(){const e=document.querySelector(".js-user-profile-sticky-bar");return{add(){e.classList.add("is-follow-stuck")},remove(){e.classList.remove("is-follow-stuck")}}})),o(".js-profile-tab-count-container",(function(e){!async function(e){const t=new URL(e.getAttribute("data-url"),window.location.origin),n=new URLSearchParams(t.search.slice(1)),o=e.querySelector(".js-profile-repository-count"),r=e.querySelector(".js-profile-project-count"),i=e.querySelector(".js-profile-team-count"),s=e.querySelector(".js-profile-member-count");o&&n.append("repo","1"),r&&n.append("project","1"),i&&n.append("team","1"),s&&n.append("member","1"),t.search=n.toString();const c=await fetch(t.toString(),{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!c.ok)return;const l=(await c.json()).data;o&&l.repositories&&C(o,l.repositories.totalCount),r&&l.projects&&C(r,l.projects.totalCount),i&&l.teams&&C(i,l.teams.totalCount),s&&l.members&&C(s,l.members.totalCount),e.classList.contains("js-responsive-underlinenav")&&a(e)}(e)}))}}}));
//# sourceMappingURL=profile-3b1fa5d8.js.map
